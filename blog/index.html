<html>
	<head>
		<title>Austin Haskell</title>
		<link rel="stylesheet" type="text/css" href="blog.css">
		<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="boids.js"></script>

		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

	</head>
	<body class="fill_page">
		<canvas id="background"></canvas>
		<div id="main_content" class="fill_page">
			<div id="name_title_desktop" class="desktop_only">Austin Haskell</div>
			<div id="name_title_mobile" class="mobile_only">Austin Haskell</div>
			<p class="subtitle">Software Engineer - Rust fanatic</p>
			<p class="subtitle">I like to make things...</p>

			<div class="material-symbols-outlined" id="fullscreen_button" onclick="fullscreen_mode()">
				fullscreen
			</div>

			<div class="material-symbols-outlined" id="exit_fullscreen_button" onclick="fullscreen_mode()">
				fullscreen_exit
			</div>

			<div id="links_section">
				<a class="homepage_links" href="articles/index.html">Blog</a>
				<a class="homepage_links" href="useful_links.html">Projects</a>
				<a class="homepage_links" href="useful_links.html">Resume</a>
				<a class="homepage_links" href="useful_links.html">Useful Links</a>
			</div>
		</div>
		<script>

			document.addEventListener("DOMContentLoaded", draw_background());

			var in_fullscreen_mode = false;

			function fullscreen_mode() {
				var main_content  = document.getElementById("main_content");
				var title_desktop = document.getElementById("name_title_desktop");
				var title_mobile  = document.getElementById("name_title_mobile");
				var links_section = document.getElementById("links_section");
				var subtitles     = document.getElementsByClassName("subtitle");

				var fullscreen_button      = document.getElementById("fullscreen_button");
				var exit_fullscreen_button = document.getElementById("exit_fullscreen_button");

				if (in_fullscreen_mode) {
					main_content.style["border-width"] = 8;
					main_content.style.width  = "97vw";
					main_content.style.height = "95vh";

					title_desktop.style["opacity"] = 1;
					title_mobile.style["opacity"] = 1;
					links_section.style["opacity"] = 1;

					for (var subtitle of subtitles) {
						subtitle.style["opacity"] = 1;
					}

					fullscreen_button.style["opacity"] = 1;
					exit_fullscreen_button.style["opacity"] = 0;

				} else {
					main_content.style["border-width"] = 0;
					main_content.style.width  = "100vw";
					main_content.style.height = "100vh";

					title_desktop.style["opacity"] = 0;
					title_mobile.style["opacity"] = 0;
					links_section.style["opacity"] = 0;

					for (var subtitle of subtitles) {
						subtitle.style["opacity"] = 0;
					}

					exit_fullscreen_button.style["opacity"] = 1;
					fullscreen_button.style["opacity"] = 0;
				}

				in_fullscreen_mode = !in_fullscreen_mode; 
			}

			function draw_background() {

				const time_between_simulation_ticks_in_ms = 50;
				const stop_simulation_after_x_seconds = 60;
				const boid_count = 50; 

				var canvas = document.getElementById("background");
				var context = canvas.getContext("2d"); 

				canvas.height = window.outerHeight;
				canvas.width = window.outerWidth; 

				var boids = [];
				for (var i = 0; i < boid_count; i++) {
					boids.push(new Boid(new Vector(canvas.width / 2, canvas.height / 2), random_vector(), random_vector()));
				}

				var angle = 0; 
				var interval_id = setInterval(function(){ 
					context.clearRect(0, 0, canvas.width, canvas.height); 
					for (var boid of boids) {
						boid.update(canvas.width, canvas.height, boids);
					}

					for (var boid of boids) {
						boid.draw(canvas, "#82776c")
					}
				}, time_between_simulation_ticks_in_ms); 

				// canvas.height = 400;
				// canvas.width = 800; 

				// var max_distance_from_line = 100;

				// var line_start = { x: Math.random() * canvas.width, y: 0 };
				// var line_end   = { x: Math.random() * canvas.width, y: canvas.height };

				// var interval_id = setInterval(function(){ 

				// 	context.clearRect(0, 0, canvas.width, canvas.height); 
				// 	var shift_distance = Math.random() * 100;
				// 	line_start.x += (Math.random() > 0.5 ? shift_distance : -shift_distance); 
				// 	line_end.x += (Math.random() > 0.5 ? shift_distance : -shift_distance)
				// 	draw_fuzz(canvas, context, line_start, line_end, max_distance_from_line);

				// }, 250);

				setTimeout(function() {
					console.log("Stopping simulation");
					clearInterval(interval_id)	
				}, stop_simulation_after_x_seconds * 1000)

			}

			function draw_fuzz(canvas, context, line_start, line_end, max_distance_from_line) {

				// var line_slope = (line_end.y - line_start.y) / (line_end.x - line_start.x); 

				// context.fillStyle = "#82776c"; 
				// for (var index = 0; index < 2000; index++) {

				// 	var point = { 
				// 		x: 0, 
				// 		y: Math.floor(canvas.height - Math.random() * canvas.height)
				// 	}

				// 	point.x = get_x_pos_for_line_at_y(point.y, line_slope, line_start.x, line_start.y);
				// 	point.x += (Math.random() > 0.5 ? Math.random() * max_distance_from_line : Math.random() * -max_distance_from_line ) 

				// 	var line_x_pos = Math.floor(get_x_pos_for_line_at_y(point.y, line_slope, line_start.x, line_start.y)); 

				// 	// The farther away from the line we are, the less likely we are to draw a point. 
				// 	var delta_x = Math.abs(point.x - line_x_pos); 

				// 	var inverse_normalized_x = 1 / (delta_x / canvas.width);

				// 	var do_we_draw_this_point = inverse_normalized_x > (Math.random() * 100);
				// 	if (do_we_draw_this_point)
				// 		context.fillRect(point.x, point.y, 1, 1);
				// } 
			}

			function get_x_pos_for_line_at_y(y, slope, line_start_x, line_start_y) {
				// // y - y1 = m(x - x1)

				// // y - y1
				// var delta_y = y - line_start_y;
				// // ( y - y1 ) / m
				// var delta_y_over_slope = delta_y / slope;
				// // ( ( y - y1 ) / m ) + x1 = x
				// return delta_y_over_slope + line_start_x;
			}

		</script>
	</body>
</html>