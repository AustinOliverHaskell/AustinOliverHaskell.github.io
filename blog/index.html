<html>
	<head>
		<title>Austin Haskell</title>
		<link rel="stylesheet" type="text/css" href="blog.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
	</head>
	<body class="fill_page">
		<canvas id="background" width="1200" height="600"></canvas>
		<div id="main_content" class="fill_page">
			<div id="name_title">Austin Haskell</div>
			<p class="subtitle">Software Engineer - Rust fanatic</p>
			<p class="subtitle">I like to make things...</p>
			<button id="menu_button" onClick="launch_menu">
				<span class="material-symbols-outlined">
					menu
				</span>
			</button>
		</div>
		<script>

			document.addEventListener("DOMContentLoaded", draw_background());

			function launch_menu() {
				console.log("Menu!");
			}

			function draw_background() {
				var canvas = document.getElementById("background");
				var context = canvas.getContext("2d"); 

				var max_distance_from_line = 100;

				var line_start = { x: Math.random() * canvas.width, y: 0 };
				var line_end   = { x: Math.random() * canvas.width, y: canvas.height };

				var interval_id = setInterval(function(){ 

					var shift_distance = Math.random() * 100;
					line_start.x += (Math.random() > 0.5 ? shift_distance : -shift_distance); 
					line_end.x += (Math.random() > 0.5 ? shift_distance : -shift_distance)
					draw_fuzz(canvas, context, line_start, line_end, max_distance_from_line);
				}, 250);

				setTimeout(function() {
					console.log("Stopping drawing");
					clearInterval(interval_id)	
				}, 60000)

			}

			function draw_fuzz(canvas, context, line_start, line_end, max_distance_from_line) {
				// context.moveTo(line_start.x, line_start.y);
				// context.lineTo(line_end.x,     line_end.y);
				// context.stroke();

				var line_slope = (line_end.y - line_start.y) / (line_end.x - line_start.x); 

				context.fillStyle = "#82776c"; 
				for (var index = 0; index < 2000; index++) {

					var point = { 
						x: 0, 
						y: Math.floor(canvas.height - Math.random() * canvas.height)
					}

					point.x = get_x_pos_for_line_at_y(point.y, line_slope, line_start.x, line_start.y);
					point.x += (Math.random() > 0.5 ? Math.random() * max_distance_from_line : Math.random() * -max_distance_from_line ) 

					var line_x_pos = Math.floor(get_x_pos_for_line_at_y(point.y, line_slope, line_start.x, line_start.y)); 

					// The farther away from the line we are, the less likely we are to draw a point. 
					var delta_x = Math.abs(point.x - line_x_pos); 

					var inverse_normalized_x = 1 / (delta_x / canvas.width);

					var do_we_draw_this_point = inverse_normalized_x > (Math.random() * 100);
					if (do_we_draw_this_point)
						context.fillRect(point.x, point.y, 1, 1);
				} 
			}

			function get_x_pos_for_line_at_y(y, slope, line_start_x, line_start_y) {
				// y - y1 = m(x - x1)

				// y - y1
				var delta_y = y - line_start_y;
				// ( y - y1 ) / m
				var delta_y_over_slope = delta_y / slope;
				// ( ( y - y1 ) / m ) + x1 = x
				return delta_y_over_slope + line_start_x;
			}

		</script>
	</body>
</html>